import{j as o,e,u as U,f,g as j,h as A,c as R,r as d,T as h,i as T,k as $,R as g,m as I}from"./index.af594715.js";import{S as L}from"./index.d9892879.js";import{T as b}from"./index.44813d41.js";import"./SearchOutline.bca8122b.js";const K=({data:c,checked:n,onClick:u})=>{var a;const r=(a=c.coverUrl)!=null?a:"img/img3.jpg",t=(100*c.chapterIndex/c.chapterLength).toFixed(0);return o("div",{className:"relative flex flex-col w-24 text-xs cursor-pointer",onClick:u,children:[e("img",{src:r,className:`aspect-2/3 shadow-md shadow-gray-800 ${n?"brightness-50":""} per`}),e("span",{className:"dark:text-leaf-300 truncate mt-2",children:c.name}),o("span",{className:"text-gray-400",children:["\u5DF2\u9605\u8BFB ",t,"%"]}),n&&e("span",{className:"check-box absolute right-1.5 top-1.5 w-3 bg-red-500"})]})},z=()=>{const c=U(),{books:n}=f(j),u=f(A),r=R(),[t,a]=d.exports.useState([]),[l,m]=d.exports.useState(!1),B=s=>{if(l===!0){N(s);return}v(s)},N=s=>{if(t.includes(s)){a(t.filter(i=>s.bookUrl!==i.bookUrl));return}a([...t,s])},v=s=>{const{bookUrl:i,bookSource:E,chapterIndex:D}=s,x=u.find(S=>S.url===E);if(x===void 0){h.show("\u4E66\u6E90\u4E0D\u5B58\u5728\uFF01");return}r(T({bookSource:x,bookUrl:i})).then(()=>{r($(D)),c(g.BookReader)})},F=()=>{if(n.length===t.length){a([]);return}a(n)},w=()=>{t.length!==0&&(r(I(t)),p())},y=()=>{h.show("\u656C\u8BF7\u671F\u5F85!")},C=()=>{h.show("\u656C\u8BF7\u671F\u5F85!")},p=()=>{m(!1),a([])},k=()=>c(g.BookSearch);return o(d.exports.Fragment,{children:[o("div",{className:"bg-leaf-secondary dark:bg-leaf-secondary-dark select-none",children:[e(L,{placeholder:"\u8BF7\u8F93\u5165\u4E66\u540D\u6216\u4F5C\u8005\u540D",className:"flex-grow mx-4 mt-3",onFocus:k,children:e("div",{className:"btn rounded-none py-0 pr-0 font-bold border-l",children:"+"})}),!l&&o("div",{className:"flex items-center justify-between h-12",children:[e(b,{items:[{key:1,title:"\u4E66\u67B6"},{key:2,title:"\u4E66\u5355"}],activeKey:1}),o("div",{className:"btn text-xs space-x-1.5",onClick:()=>m(!l),children:[e("span",{className:"check-box"}),e("span",{children:"\u9009\u62E9"})]})]}),l&&o("div",{className:"flex items-center h-12",children:[e("div",{className:"btn text-sm w-24 py-1",onClick:F,children:t.length===n.length?"\u5168\u90E8\u53D6\u6D88":"\u5168\u9009"}),e("span",{className:"flex-grow text-center text-sm",children:t.length>0?`\u5DF2\u9009\u62E9[${t.length}/${n.length}]`:"\u9009\u62E9\u4E66\u7C4D"}),e("div",{className:"btn text-sm w-24 py-1",onClick:p,children:"\u53D6\u6D88"})]}),e(b,{items:[{key:1,title:"\u9ED8\u8BA4"},{key:2,title:"\u672A\u8BFB"},{key:3,title:"\u5DF2\u8BFB"},{key:4,title:"\u5783\u573E\u7BB1"}],activeKey:1,className:"text-sm"})]}),o("div",{className:"flex-grow flex flex-wrap content-start items-start overflow-y-auto px-5 pt-2 gap-4 select-none",children:[n.map(s=>e(K,{data:s,checked:t.includes(s),onClick:()=>B(s)},s.bookUrl)),!l&&e("div",{className:"btn w-24 aspect-2/3 font-semibold text-4xl shadow-md shadow-gray-800",onClick:k,children:"+"})]}),l&&o("div",{className:`tab-bar text-sm ${t.length===0?" pointer-events-none opacity-50":""}`,children:[e("button",{className:"btn",onClick:y,children:"\u4E0B\u8F7D"}),e("button",{className:"btn",onClick:C,children:"\u5206\u7EC4"}),e("button",{className:"btn",onClick:w,children:"\u5220\u9664"})]})]})};export{z as default};
//# sourceMappingURL=index.9308a17f.js.map
