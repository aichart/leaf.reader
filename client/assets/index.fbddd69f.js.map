{"version":3,"file":"index.fbddd69f.js","sources":["../../../node_modules/antd-mobile-icons/es/ShopbagOutline.js","../../../node_modules/antd-mobile-icons/es/UserOutline.js","../../../client/src/pages/book/index.tsx"],"sourcesContent":["import * as React from \"react\";\n\nfunction ShopbagOutline(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 48 48\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\"\n  }, props, {\n    style: Object.assign({\n      verticalAlign: '-0.125em'\n    }, props.style),\n    className: ['antd-mobile-icon', props.className].filter(Boolean).join(' ')\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"ShopbagOutline-ShopbagOutline\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"ShopbagOutline-\\u7F16\\u7EC4\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"ShopbagOutline-\\u77E9\\u5F62\",\n    fill: \"#FFFFFF\",\n    opacity: 0,\n    x: 0,\n    y: 0,\n    width: 48,\n    height: 48\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M37,4 C40.3137085,4 43,6.6862915 43,10 L43,38 C43,41.3137085 40.3137085,44 37,44 L11,44 C7.6862915,44 5,41.3137085 5,38 L5,10 C5,6.6862915 7.6862915,4 11,4 L37,4 Z M40,36 L8,36 L8,38 C8,39.5976809 9.24891996,40.9036609 10.8237272,40.9949073 L11,41 L37,41 C38.5976809,41 39.9036609,39.75108 39.9949073,38.1762728 L40,38 L40,36 Z M37,7 L11,7 C9.40231912,7 8.09633912,8.24891996 8.00509269,9.82372721 L8,10 L8,33 L40,33 L40,10 C40,8.40231912 38.75108,7.09633912 37.1762728,7.00509269 L37,7 Z M19.3833345,12 C19.5850013,12 19.7500015,12.1650002 19.7500015,12.366667 L19.750042,14.7499849 C19.7500424,17.2035658 21.6826755,19.2220853 24.1341917,19.3287339 L24.3333722,19.3333287 C26.7872173,19.3331869 28.8056509,17.4004374 28.9121275,14.9489212 L28.9167109,14.7500045 L28.9167109,12.366667 C28.9167109,12.1650002 29.0817111,12 29.2833778,12 L31.3000454,12 C31.5017122,12 31.6667124,12.1650002 31.6667124,12.366667 L31.6667124,14.7500045 C31.6667124,18.8000975 28.3834621,22.0833607 24.3333562,22.0833607 C20.2832632,22.0833607 17,18.8001104 17,14.7500045 L17,12.366667 C17,12.1650002 17.1650002,12 17.366667,12 L19.3833345,12 Z\",\n    id: \"ShopbagOutline-\\u5F62\\u72B6\\u7ED3\\u5408\",\n    fill: \"currentColor\",\n    fillRule: \"nonzero\"\n  }))));\n}\n\nexport default ShopbagOutline;","import * as React from \"react\";\n\nfunction UserOutline(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 48 48\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\"\n  }, props, {\n    style: Object.assign({\n      verticalAlign: '-0.125em'\n    }, props.style),\n    className: ['antd-mobile-icon', props.className].filter(Boolean).join(' ')\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"UserOutline-UserOutline\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"UserOutline-\\u7F16\\u7EC4\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"UserOutline-\\u77E9\\u5F62\",\n    fill: \"#FFFFFF\",\n    opacity: 0,\n    x: 0,\n    y: 0,\n    width: 48,\n    height: 48\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24.5,4 C30.0112644,4 34.479027,8.46775399 34.479027,13.9790078 L34.479027,18.0209922 C34.479027,21.7144498 32.4724515,24.9392476 29.4899594,26.6647285 L29.4895135,27 L40.4649873,32.8658886 C42.8766161,34.1547938 44.2604463,36.7822067 43.9591026,39.5 C43.6750656,42.0617054 41.5099747,44 38.9325658,44 L10.0674342,44 C7.49002529,44 5.32493441,42.0617054 5.04089744,39.5 C4.73955374,36.7822067 6.12338392,34.1547938 8.53501271,32.8658886 L19.5104865,27 L19.5100406,26.6647285 C16.5275485,24.9392476 14.520973,21.7144498 14.520973,18.0209922 L14.520973,13.9790078 C14.520973,8.46775399 18.9887356,4 24.5,4 Z M24.5,7 C20.7258932,7 17.6514878,9.9957724 17.5250256,13.7390798 L17.5209788,13.9790078 L17.5209788,18.0209922 C17.5209788,20.4528116 18.7728519,22.6635411 20.7856095,23.9310701 L21.0123556,24.0679885 L22.3083607,24.817775 C22.4317831,24.8891793 22.5078628,25.0208861 22.5080524,25.1634751 L22.5125654,28.5568164 C22.512762,28.7046068 22.4314515,28.8404631 22.3011089,28.9101252 L9.94909066,35.5117138 L9.94909066,35.5117138 C8.6194532,36.2223442 7.85648652,37.670953 8.0226306,39.1693924 C8.13239999,40.1593932 8.93277672,40.9205158 9.91149276,40.9941531 L10.0674342,41 L38.9325658,41 C39.9810601,41 40.8618227,40.2114985 40.9773694,39.1693924 C41.1359615,37.7390639 40.4479878,36.3541389 39.2286771,35.6131276 L39.0509093,35.5117138 L26.6988911,28.9101252 C26.5685485,28.8404631 26.487238,28.7046068 26.4874346,28.5568164 L26.4919476,25.1634751 C26.4921372,25.0208861 26.5682169,24.8891793 26.6916393,24.817775 L27.9876444,24.0679885 L27.9876444,24.0679885 C30.0560904,22.8713167 31.3818366,20.7046996 31.4738944,18.2902478 L31.4790212,18.0209922 L31.4790212,13.9790078 C31.4790212,10.1246082 28.354407,7 24.5,7 Z\",\n    id: \"UserOutline-\\u5F62\\u72B6\\u7ED3\\u5408\",\n    fill: \"currentColor\",\n    fillRule: \"nonzero\"\n  }))));\n}\n\nexport default UserOutline;","import {\r\n  FC,\r\n  Fragment,\r\n  useEffect\r\n} from \"react\"\r\nimport {\r\n  Navigate,\r\n  useLocation,\r\n  useNavigate,\r\n  useOutlet,\r\n} from \"react-router-dom\"\r\nimport { RoutePath } from \"@Client/routers\";\r\nimport { useAppDispatch } from \"@Client/store\";\r\nimport { loadBookSourceList } from \"@Client/store/features/slice.booksource\";\r\nimport { loadBookshelf } from \"@Client/store/features/slice.bookshelf\";\r\nimport TabBar from \"@Client/components/tab-bar\";\r\nimport {\r\n  ShopbagOutline,\r\n  SearchOutline,\r\n  UserOutline\r\n} from 'antd-mobile-icons';\r\n\r\n// book page\r\nconst BookPage: FC = () => {\r\n  const nav = useNavigate();\r\n  const location = useLocation();\r\n  const outlet = useOutlet();\r\n  const dispath = useAppDispatch();\r\n\r\n  const onTab = (key: number | string, lastKey?: number | string) => {\r\n    if(key === lastKey) {\r\n      return;\r\n    }\r\n    nav(key.toString());\r\n  };\r\n\r\n  useEffect(() => {\r\n    // 加载书源\r\n    dispath(loadBookSourceList())\r\n    .then(\r\n      // 加载书架\r\n      () => dispath(loadBookshelf())\r\n    )\r\n  }, []);\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* content */}\r\n      <div className='flex-grow flex flex-col overflow-y-auto'>\r\n        { outlet ?? <Navigate to={RoutePath.BookShelf} /> }\r\n      </div>\r\n\r\n      {/* bottom tabbar */}\r\n      <TabBar items={[\r\n        {key: RoutePath.BookShelf, title: '书架', icon: <ShopbagOutline fontSize={28}/>},\r\n        {key: RoutePath.BookStore, title: '书城', icon: <SearchOutline fontSize={28}/>},\r\n        {key: RoutePath.User, title: '用户', icon: <UserOutline fontSize={28}/>},\r\n      ]} activeKey={location.pathname} onClick={onTab} className='flex-none text-xs border-t'/>\r\n    </Fragment>\r\n  )\r\n}\r\nexport default BookPage;"],"names":["React.createElement","BookPage","nav","useNavigate","location","useLocation","outlet","useOutlet","dispath","useAppDispatch","onTab","key","lastKey","toString","useEffect","loadBookSourceList","then","loadBookshelf","Fragment","children","_jsx","className","Navigate","to","RoutePath","BookShelf","TabBar","items","title","icon","ShopbagOutline","fontSize","BookStore","SearchOutline","User","UserOutline","activeKey","pathname","onClick"],"mappings":"sMAEA,WAAwB,EAAO,CAC7B,MAAoBA,yBAAoB,MAAO,OAAO,OAAO,CAC3D,MAAO,MACP,OAAQ,MACR,QAAS,YACT,MAAO,6BACP,WAAY,8BACb,EAAE,EAAO,CACR,MAAO,OAAO,OAAO,CACnB,cAAe,UACrB,EAAO,EAAM,KAAK,EACd,UAAW,CAAC,mBAAoB,EAAM,SAAS,EAAE,OAAO,OAAO,EAAE,KAAK,GAAG,CAC7E,CAAG,EAAgBA,EAAmB,QAAA,cAAC,IAAK,CACxC,GAAI,gCACJ,OAAQ,OACR,YAAa,EACb,KAAM,OACN,SAAU,SACd,EAAkBA,EAAAA,QAAAA,cAAoB,IAAK,CACvC,GAAI,6BACR,EAAkBA,EAAAA,QAAAA,cAAoB,OAAQ,CAC1C,GAAI,8BACJ,KAAM,UACN,QAAS,EACT,EAAG,EACH,EAAG,EACH,MAAO,GACP,OAAQ,EACZ,CAAG,EAAgBA,EAAmB,QAAA,cAAC,OAAQ,CAC3C,EAAG,smCACH,GAAI,0CACJ,KAAM,eACN,SAAU,SACd,CAAG,CAAC,CAAC,CAAC,CACN,CClCA,WAAqB,EAAO,CAC1B,MAAoBA,yBAAoB,MAAO,OAAO,OAAO,CAC3D,MAAO,MACP,OAAQ,MACR,QAAS,YACT,MAAO,6BACP,WAAY,8BACb,EAAE,EAAO,CACR,MAAO,OAAO,OAAO,CACnB,cAAe,UACrB,EAAO,EAAM,KAAK,EACd,UAAW,CAAC,mBAAoB,EAAM,SAAS,EAAE,OAAO,OAAO,EAAE,KAAK,GAAG,CAC7E,CAAG,EAAgBA,EAAmB,QAAA,cAAC,IAAK,CACxC,GAAI,0BACJ,OAAQ,OACR,YAAa,EACb,KAAM,OACN,SAAU,SACd,EAAkBA,EAAAA,QAAAA,cAAoB,IAAK,CACvC,GAAI,0BACR,EAAkBA,EAAAA,QAAAA,cAAoB,OAAQ,CAC1C,GAAI,2BACJ,KAAM,UACN,QAAS,EACT,EAAG,EACH,EAAG,EACH,MAAO,GACP,OAAQ,EACZ,CAAG,EAAgBA,EAAmB,QAAA,cAAC,OAAQ,CAC3C,EAAG,4rDACH,GAAI,uCACJ,KAAM,eACN,SAAU,SACd,CAAG,CAAC,CAAC,CAAC,CACN,CCbA,KAAMC,GAAe,IAAM,CACzB,KAAMC,GAAMC,IACNC,EAAWC,IACXC,EAASC,IACTC,EAAUC,IAEVC,EAAQ,CAACC,EAAsBC,IAA8B,CACjE,AAAGD,IAAQC,GAGPD,EAAAA,EAAIE,UAAL,CAAA,EAGLC,SAAAA,QAAAA,UAAU,IAAM,CAENC,EAAAA,EAAAA,CAAD,EACNC,KAEC,IAAMR,EAAQS,EAAD,CAAA,CAHfT,CAFO,EAON,CAPM,CAAA,IAUNU,EAAAA,QAAAA,SAAD,CAAAC,SAEE,CAAAC,EAAA,MAAA,CAAKC,UAAU,0CAAfF,SACIb,UAAUc,EAACE,EAAD,CAAUC,GAAIC,EAAUC,SAAAA,CAAxB,CAAA,CADd,EAKAL,EAACM,EAAD,CAAQC,MAAO,CACb,CAAChB,IAAKa,EAAUC,UAAWG,MAAO,eAAMC,OAAOC,EAAD,CAAgBC,SAAU,EAAA,IACxE,CAACpB,IAAKa,EAAUQ,UAAWJ,MAAO,eAAMC,OAAOI,EAAD,CAAeF,SAAU,EAAA,IACvE,CAACpB,IAAKa,EAAUU,KAAMN,MAAO,eAAMC,OAAOM,EAAD,CAAaJ,SAAU,EAAA,GAHnD,EAIZK,UAAWhC,EAASiC,SAAUC,QAAS5B,EAAOW,UAAU,4BAAA,EAT3D,CAAA,EAzBN"}