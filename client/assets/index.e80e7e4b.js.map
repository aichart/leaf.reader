{"version":3,"file":"index.e80e7e4b.js","sources":["../../../client/src/components/book/book-info-item/index.tsx","../../../client/src/pages/book-search/index.tsx"],"sourcesContent":["import { FC } from 'react';\r\nimport type { BookInfo } from '@Shared/booksources/book/BookInfo';\r\n\r\n\r\nexport interface BookInfoComponentProps {\r\n  bookInfo: BookInfo;\r\n  onClick?: () => void;\r\n}\r\n\r\n\r\nexport const BookInfoComponent: FC<BookInfoComponentProps> = ({\r\n  bookInfo, onClick\r\n}) => {\r\n  const { coverUrl, name, author,  kind } = bookInfo;\r\n  return (\r\n    <div className='flex text-leaf-500 cursor-pointer' onClick={onClick}>\r\n      <img src={coverUrl} alt='封面' className='overflow-clip rounded-md aspect-2/3 w-16'/>\r\n      <div className='flex-grow flex flex-col justify-around m-2'>\r\n        <span className='text-sm'>{name}</span>\r\n        <span className='text-xs text-gray-400'>作者：{author ?? '佚名'}</span>\r\n        <span className='text-xs text-gray-400'>类型：{kind ?? '小说'}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default BookInfoComponent;","import { FC, Fragment } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAppDispatch, useAppSelector } from \"@Client/store\";\r\nimport { searchBook, searchSelector } from \"@Client/store/features/slice.search\";\r\nimport { loadBook } from \"@Client/store/features/slice.book\";\r\nimport type { BookProfile } from \"@Shared/booksources\";\r\nimport { RoutePath } from \"@Client/routers\";\r\nimport SearchBar from '@Client/components/search-bar';\r\nimport BookInfoItem from \"@Client/components/book/book-info-item\";\r\nimport TabBar from \"@Client/components/tab-bar\";\r\n\r\n\r\nexport interface BookSearchPageProps {\r\n  searchKey?: string;\r\n}\r\n\r\nconst BookSearchPage: FC<BookSearchPageProps> = ({\r\n  searchKey\r\n}) => {\r\n  const nav = useNavigate();\r\n  const dispath = useAppDispatch();\r\n  const { bookList } = useAppSelector(searchSelector);\r\n\r\n  searchKey ??= '斗罗';\r\n  // 搜索\r\n  const onSearch = (key: string) => {\r\n    dispath(searchBook(key));\r\n  };\r\n\r\n  // 打开书籍\r\n  const openBook = (item: BookProfile) => {\r\n    dispath(loadBook(item)).then(() => nav(RoutePath.BookInfo));\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* top */}\r\n      <div className='bg-leaf-secondary dark:bg-leaf-secondary-dark select-none'>\r\n        {/* search bar */}\r\n        <SearchBar placeholder='请输入书名或作者名' className='flex-grow mx-4 mt-3' value='斗' clearable onSearch={onSearch}>\r\n          <div className='btn rounded-none py-0 pr-0 font-bold border-l' onClick={() => nav(-1)}>取消</div>\r\n        </SearchBar>\r\n\r\n        {/* trigger bar */}\r\n        <TabBar items={[\r\n          {key: 1, title: '全部'},\r\n          {key: 2, title: '电子书'},\r\n          {key: 3, title: '作者'},\r\n          {key: 4, title: '有声图书'},\r\n          {key: 5, title: '书单'},\r\n        ]} activeKey={1} className='text-xs w-full border-b mt-2'/>\r\n      </div>\r\n\r\n      {/* search result list */}\r\n      <div className='flex-grow overflow-y-auto mx-4 select-none'>\r\n        <div className='flex flex-col my-1 p-4 border dark:border-leaf-700 rounded-2xl space-y-4 bg-leaf-50 dark:bg-leaf-50-dark'>\r\n          {\r\n            bookList.map(\r\n              (item, idx) => <BookInfoItem\r\n              key={item.bookUrl ?? idx}\r\n              bookInfo={item}\r\n              onClick={() => openBook(item)}\r\n              />\r\n            )\r\n\r\n          }\r\n          {\r\n            bookList.length === 0 &&\r\n            <div className='text-center text-leaf-400 text-sm'>我于杀戮之中盛放，亦如黎明中的花朵</div>\r\n          }\r\n        </div>\r\n      </div>\r\n\r\n\r\n    </Fragment>\r\n  );\r\n};\r\nexport default BookSearchPage;"],"names":["BookInfoComponent","bookInfo","onClick","coverUrl","name","author","kind","className","children","_jsx","src","alt","_jsxs","BookSearchPage","searchKey","nav","useNavigate","dispath","useAppDispatch","bookList","useAppSelector","searchSelector","onSearch","key","searchBook","openBook","item","loadBook","then","RoutePath","BookInfo","Fragment","SearchBar","placeholder","value","clearable","TabBar","items","title","activeKey","map","idx","BookInfoItem","bookUrl","length"],"mappings":"iNAUO,KAAMA,GAAgD,CAAC,CAC5DC,WAAUC,aACN,CACE,KAAA,CAAEC,WAAUC,OAAMC,SAASC,QAASL,EAC1C,SACE,MAAA,CAAKM,UAAU,oCAAoCL,UAAnDM,SACE,CAAAC,EAAA,MAAA,CAAKC,IAAKP,EAAUQ,IAAI,eAAKJ,UAAU,0CAAA,CAAvC,EACAK,EAAA,MAAA,CAAKL,UAAU,6CAAfC,SACE,CAAAC,EAAA,OAAA,CAAMF,UAAU,UAAhBC,SAA2BJ,CAAAA,CAA3B,EACAQ,EAAA,OAAA,CAAML,UAAU,wBAAhBC,SAA4CH,CAAAA,qBAAAA,UAAU,cAAVA,CAAAA,CAA5C,EACAO,EAAA,OAAA,CAAML,UAAU,wBAAhBC,SAA4CF,CAAAA,qBAAAA,UAAQ,cAARA,CAAAA,CAA5C,CAFA,CAAA,CADF,CADA,CAAA,CADF,CALG,ECMDO,EAA0C,CAAC,CAC/CC,eACI,CACJ,KAAMC,GAAMC,IACNC,EAAUC,IACV,CAAEC,YAAaC,EAAeC,CAAD,EAErB,YAAA,gBAERC,KAAAA,GAAW,AAACC,GAAgB,CACxBC,EAAAA,EAAWD,CAAD,CAAX,CAAA,EAIHE,EAAW,AAACC,GAAsB,CAC9BC,EAAAA,EAASD,CAAD,CAAT,EAAiBE,KAAK,IAAMb,EAAIc,EAAUC,QAAX,CAAtCb,CAAAA,EAGF,SACGc,EAAAA,QAAAA,SAAD,CAAAvB,SAEE,CAAAI,EAAA,MAAA,CAAKL,UAAU,4DAAfC,SAAA,CAEEC,EAACuB,EAAD,CAAWC,YAAY,yDAAY1B,UAAU,sBAAsB2B,MAAM,SAAIC,UAA7E,GAAuFb,WAAvFd,WACE,MAAA,CAAKD,UAAU,gDAAgDL,QAAS,IAAMa,EAAI,EAAD,EAAjFP,SAAA,cAAA,CAAA,CAAA,GAIFC,EAAC2B,EAAD,CAAQC,MAAO,CACb,CAACd,IAAK,EAAGe,MAAO,cAAA,EAChB,CAACf,IAAK,EAAGe,MAAO,oBAAA,EAChB,CAACf,IAAK,EAAGe,MAAO,cAAA,EAChB,CAACf,IAAK,EAAGe,MAAO,0BAAA,EAChB,CAACf,IAAK,EAAGe,MAAO,cAAA,CALH,EAMZC,UAAW,EAAGhC,UAAU,8BAAA,EAb7B,CAAA,CAAA,EAiBAE,EAAA,MAAA,CAAKF,UAAU,6CAAfC,WACE,MAAA,CAAKD,UAAU,2GAAfC,SAEIW,CAAAA,EAASqB,IACP,CAACd,EAAMe,IAAAA,gBAASC,EAAD,CAEfzC,SAAUyB,EACVxB,QAAS,IAAMuB,EAASC,CAAD,CAAA,EAFlBA,KAAKiB,UAALjB,OAAgBe,CADN,EADjBtB,EAUAA,EAASyB,SAAW,GACpBnC,EAAA,MAAA,CAAKF,UAAU,oCAAfC,SAAA,wGAAA,CAAA,CAXAW,CAAAA,CAFJ,CAAA,CADF,CAjBA,CAAA,EArBN"}