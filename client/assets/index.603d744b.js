import{e as t,r as x,j as d,u as N,c as v,f as h,o as y,g as B,k as w,R as F,p as S}from"./index.af594715.js";import{L as A}from"./LeftOutline.57aa5de2.js";const j=({visible:o,className:a,mask:e,children:s,onMaskClick:l})=>(e!=null||(e=!0),t(x.exports.Fragment,{children:o&&t("div",{className:`absolute inset-0 flex flex-col bg-black ${e?"bg-opacity-20":"bg-opacity-0"} ${a}`,onClick:l,children:s})})),P=({chapters:o,chapterIndex:a,className:e,onSelect:s})=>{a!=null||(a=0);const l=r=>r===a?"text-blue-500":Math.random()>.5?"":"text-gray-400";return d("div",{className:`flex flex-col p-4 divide-y dark:divide-gray-600 overflow-y-auto bg-leaf-50 dark:bg-leaf-50-dark text-base text-leaf-600 dark:text-leaf-600-dark cursor-pointer ${e}`,onClick:r=>r.stopPropagation(),children:[t("span",{className:"p-3",children:"\u7AE0\u8282\u5217\u8868"}),o.map(({name:r,url:i},n)=>t("span",{className:`p-2 ${l(n)}`,onClick:()=>s==null?void 0:s(n),children:r},i))]})},U=()=>{var f;const o=N(),a=v(),{book:e,chapterIndex:s}=h(y),{books:l}=h(B),r=l.find(c=>c.bookUrl===(e==null?void 0:e.bookUrl))!==void 0,[i,n]=x.exports.useState(!1),{coverUrl:b,name:g,author:m,wordCount:R,kind:$,intro:k}=e!=null?e:{},u=c=>{var p;const C=(p=e==null?void 0:e.chapters.length)!=null?p:0;c>=C||(a(w(c)),o(F.BookReader))};return d("div",{className:"flex flex-col h-screen select-none",children:[t("div",{className:"flex justify-between bg-leaf-secondary dark:bg-leaf-secondary-dark h-8",children:t("button",{className:"btn text-base",onClick:()=>o(-1),children:t(A,{})})}),d("div",{className:" flex-grow flex flex-col items-center m-4 p-4 rounded-3xl border shadow",children:[t("img",{src:b,alt:"\u5C01\u9762",className:"overflow-clip rounded-md aspect-2/3 w-36 mb-2"}),t("span",{className:"font-bold text-lg dark:text-gray-300",children:g}),t("button",{className:"btn text-base py-2 text-blue-600",children:m}),t("p",{className:"flex-grow indent-8 text-ellipsis text-gray-400",children:k}),t("button",{className:"btn border border-gray-400 mt-4",onClick:()=>u(s),children:"\u5F00\u59CB\u9605\u8BFB"}),t("button",{className:"btn text-xs underline text-gray-400",onClick:()=>n(!0),children:"\u7AE0\u8282\u9884\u89C8"}),!r&&t("button",{className:"btn px-0 self-end text-xs underline text-gray-400",onClick:()=>{e!==void 0&&a(S({book:e,chapterIndex:s}))},children:"\u52A0\u5165\u4E66\u67B6 \u968F\u65F6\u9605\u8BFB"})]}),t(j,{visible:i,mask:!0,onMaskClick:()=>n(!1),children:t(P,{className:"fixed inset-0 top-12",chapters:(f=e==null?void 0:e.chapters)!=null?f:[],chapterIndex:s,onSelect:u})})]})};export{U as default};
//# sourceMappingURL=index.603d744b.js.map
